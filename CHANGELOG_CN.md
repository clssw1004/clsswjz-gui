# 更新日志

本文件记录项目的所有重要更改。

## [1.0.7] - 2025-09-22

### 功能增强
- 首页增加按用户当月统计柱状图（UserMonthlyStatisticChart）

## [1.0.6] - 2025-09-06

### 功能增强
- 增强每日统计柱状图交互体验
  - 点击图表柱状时显示完整日期信息
  - 改进提示框格式，显示格式化金额和收入/支出类型标签
- 实现凭证刷新选项，可在同步设置中更新令牌而不丢失数据
- 优化视频聊天页面连接流程（仅需创建房间、加入房间即可建立连接）

## [1.0.5-beta.1] - 2025-09-02

### 功能增强
- 添加webrtc视频聊天功能

## [1.0.4-alpha.2] - 2025-08-27

### 问题修复
- 底部导航中间“+”按钮：避免点击周围区域误触展开/新增，现仅圆形按钮本体响应

## [1.0.4-alpha.1] - 2025-08-27

### 功能增强
- 每日统计（日历）切换至 Syncfusion SfCalendar 实现
  - 本地化月/周标题，仅显示当月日期
  - 新增收入/支出多选开关；日历单元按选择渲染金额
  - 样式优化：更紧凑单元、主题适配、隐藏右上角菜单
- 记账列表日历改用 SfCalendar（保留标记），选中态与构建时状态安全优化
- 每日统计柱状图合并为 `DailyStatisticBar`（卡片与图表一体）

### 工具/配置
- 升级 Gradle 8.7、AGP 8.6.0、Kotlin 2.1.0；建议使用 JDK 17
- i18n：移除废弃 synthetic-package 选项

## [1.0.3] - 2025-08-27

### 功能增强
- 新增UI布局配置页面，支持债务显示开关
  - 新增设置页面，可通过"我的"标签页 → "系统设置" → "界面设置"访问
  - 可配置记账页中债务信息的显示
- 新增每日收支统计功能
  - 新增每日统计组件(柱状图)，支持收入/支出视图切换
   - 新增每日统计组件(日历)
  - 可在界面设置中配置显示选项
  - 集成到记账页，提供响应式图表可视化


## [1.0.2] - 2025-08-20

### 功能增强
- 新增 ItemsPage：按筛选条件展示账目，使用 ItemsProvider 管理状态
- 新增路由 `AppRoutes.items`，支持传入 `BookMetaVO`、`ItemFilterDTO`，以及可选 `title`
- 统计页分类点击可跳转到 ItemsPage，并携带分类筛选及当前时间范围
- ItemsPage 支持自定义标题（如分类名）与搜索；按设计去除新增按钮
- 分类统计卡默认展示列表而非饼图
- 分类、资金账户、商家、标签、项目列表支持点击跳转到 ItemsPage，并自动带入相应筛选条件
- 通用组件 CommonSimpleCrudList 支持可选 onItemTap 回调（保持通用，不内置业务逻辑）

### 问题修复
- 修复统计页初次进入时先短暂显示错误时间范围（如全部/本年）再切回本月的闪屏问题
- 统一统计数据的初始时间范围为本月，并在切换与跳转时保持所选时间范围

## [1.0.1] - 2025-08-12

### 功能增强
- 添加附件列表集中查看已上传的附件

## [1.0.0] - 2025-07-22

### 功能增强
- 版本升级至 v1.0.0
- 适配最新Flutter版本
- 优化笔记分组筛选UI
- 修复兼容性问题，提升整体稳定性

## [1.0.0-alpha.23] - 2024-07-20

### 功能增强
- 统计页面：只加载并展示当前时间范围的数据，避免重复/覆盖
- 分类统计：列表中支持显示每个分类的账目笔数
- UI：分类饼图与列表合并为同一卡片，可切换视图，体验更佳

### 问题修复
- 修复统计页面先显示本月后又切换为全部数据的问题
- 修复切换账本或时间范围时重复加载数据的问题

## [1.0.0-alpha.22] - 2025-07-14

### 功能增强
- 统计页面：时间范围选择器重构为独立组件，采用Material 3风格并适配主题
- 统计数据支持按自定义时间范围筛选（全部/本年/本月/本周/自定义）
- 优化时间范围选择器内部padding，使布局更紧凑

### 问题修复
- 计算器面板：修复仅第一个数字可输入小数点的问题，现已支持任意操作数输入小数
- 计算器面板：修复连续运算时浮点数精度丢失问题（如1+2+3）

## [1.0.0-alpha.21] - 2025-07-13

### 功能增强
- 增强笔记分组筛选功能
  - 添加支持多选的动态分组筛选组件
  - 实现新建分组时自动刷新分组列表
  - 添加事件驱动的分组列表更新，实现实时同步
  - 优化分组筛选布局，使用换行显示以更好地利用空间

## [1.0.0-alpha.20] - 2025-07-02

### 功能增强
- 为标签徽章添加条件渲染，使用主色调样式

### 代码改进
- 修复条件渲染逻辑中的语法错误
- 将已弃用的`withOpacity`方法调用替换为`withAlpha`
- 优化布局结构以提高可维护性
- 调整UI元素顺序和间距，改善视觉层次结构

## [1.0.0-alpha.19] - 2025-05-08

### 功能增强
- 在 `item_list_page` 的导航栏中添加了搜索框，样式与 `notes_tab` 类似。
  - 集成了 `CommonSearchField` 以保持设计一致性。
  - 启用了搜索功能，可根据关键字过滤项目。

### 代码改进
- 重构了 `item_list_page`，增加了搜索功能并提升了用户体验。

## [1.0.0-alpha.18] - 2024-04-05

### 功能增强
- 增强图片预览功能
  - 添加半透明背景以提供更好的视觉体验
  - 改进图片预览控制和交互
  - 增强错误处理和加载状态
  - 优化图片显示性能

### 代码优化
- 改进代码结构和可维护性
  - 移除过时的API使用
  - 增强错误处理机制
  - 优化文件操作

### 国际化
- 添加图片预览操作的新翻译
  - 保存到相册按钮文本
  - 使用其他应用打开按钮文本
  - 保存成功提示文本
  - 错误消息处理

## [1.0.0-alpha.17] - 2024-04-04

### 功能增强
- 增强 QuillEditor 图片支持
  - 添加在 QuillEditor 中显示上传图片的功能
  - 与附件系统集成以处理图片
  - 改进编辑器中的图片渲染和布局
  - 通过视觉反馈增强用户体验

## [1.0.0-alpha.16] - 2024-04-03

### 功能增强
- 添加记事附件支持
  - 支持在记事中上传和管理多个附件
  - 支持查看和删除附件
  - 支持包括图片和文档在内的多种文件类型
  - 优化附件存储和检索机制

### 代码优化
- 增强记事附件处理
  - 实现高效的附件状态管理
  - 添加健壮的文件操作错误处理
  - 改进附件与后端的同步机制
  - 优化附件上传和删除流程

### 功能优化
- 增强笔记编辑器功能
  - 将笔记表单状态管理迁移到Provider模式
  - 改进附件处理，提供更好的错误管理
  - 优化UI响应性和状态更新

### 代码优化
- 重构笔记表单页面结构
  - 将状态管理分离到专用provider
  - 增强代码可维护性和复用性
  - 改进错误处理和用户反馈

## [1.0.0-alpha.15] - 2024-03-27

### 功能优化
- 增强数据同步机制
  - 添加新建账目时自动触发同步
  - 添加新建笔记时自动触发同步
  - 添加新建债务时自动触发同步
  - 优化同步状态管理，防止重复同步

### 问题修复
- 修复同步服务URL修改后不能立即生效的问题
  - 之前需要重启应用才能生效
  - 现在修改后立即生效

## [1.0.0-alpha.14] - 2024-03-20

### 功能优化
- 优化账目类型切换体验
  - 在账目类型从支出切换到收入时，自动将金额转换为正数
  - 在账目类型从收入切换到支出时，自动将金额转换为负数
  - 优化金额转换逻辑，保持数据一致性

## [1.0.0-alpha.13] - 2024-03-16

### 功能优化
- 优化账目列表中的账户显示
  - 将账户名称以徽章形式显示在分类名称后
  - 限制账户名称最多显示10个字
  - 调整徽章样式，使用边框和更浅的颜色
  - 改进文字对齐和间距
- 增强附件选择体验
  - 添加使用 image_picker 的相册选择选项
  - 优化底部菜单样式
  - 改进视觉反馈，符合 Material Design 3 规范

### 代码优化
- 优化 ItemsContainer 组件的布局结构
- 优化 CommonAttachmentField 组件的文件选择功能
- 改进代码可维护性和复用性

## [1.0.0-alpha.12] - 2024-03-15

### 功能优化
- 优化附件上传功能的用户体验
  - 修复在某些设备上无法从相册选择图片的问题
  - 优化文件选择器的实现方式
  - 改进文件选择的兼容性

### 代码优化
- 优化 CommonAttachmentField 组件的实现
  - 使用 image_picker 处理相册选择
  - 使用 file_picker 处理文件选择
  - 改进代码的可维护性

## [1.0.0-alpha.11] - 2025-03-12

### 问题修复
- 修改账目时间会变成00:00的bug
- 同步时因更新账户类型未判断空导致的同步问题

## [1.0.0-alpha.10] - 2025-03-11

### 代码重构
- 优化数据驱动层代码结构
  - 按照CRUD顺序（增、删、改、查）重新排列LogDataDriver类中的方法
  - 按业务域对方法进行分组（用户、账本、记账、分类、商家、标签、资金账户、笔记、债务）
  - 保持LogDataDriver和BookDataDriver之间的方法顺序一致
  - 提高代码可读性和可维护性

## [1.0.0-alpha.9] - 2025-03-10

### 功能增强
- 添加退款功能
  - 支持退款操作
  - 自动将退款记录链接为收入到原始交易
  - 优化退款表单，自动填充原始交易信息
  - 支持退款金额、账户和日期的修改

### UI 改进
- 增强交易编辑页面
  - 仅对支出交易显示退款按钮
  - 改进表单布局和交互体验
- 优化表单组件
  - 移除不必要的Provider依赖
  - 简化组件结构，便于维护

### 代码质量改进
- 重构退款表单页面
  - 移除嵌套组件，简化代码结构
  - 优化状态管理，提高性能
  - 添加错误处理和用户反馈
- 添加事件通知机制
  - 在退款操作后发送事件通知
  - 优化数据更新过程

### 框架更新
- 升级Flutter到3.29.1

## [1.0.0-alpha.8] - 2025-03-05

### 功能优化
- 重构事件处理系统
  - 将交易/债务/笔记事件合并到一个文件中
  - 添加债务和交易变化事件总线订阅
  - 使用数据库实体更新改进事件调度机制
  - 优化事件响应过程，提高应用程序响应速度

- 增强UI组件交互
  - 优化列表容器标题，添加导航支持
  - 更新统计卡片以显示月度数据
  - 改进选择框过滤，避免重复选项
  - 增强表单组件交互体验

- 代码质量改进
  - 将笔记表单页面保存方法拆分为创建/更新
  - 添加类型安全处理
  - 优化数据删除过程，添加验证
  - 改进代码可维护性和可读性

### 国际化改进
- 添加多语言支持，如"Current Month"
- 更新中文/传统中文/英文翻译

### 问题修复
- 修复过滤选择框中的重复"Add New"选项
- 修复资金账户选择逻辑
- 修复符号匹配机制

## [1.0.0-alpha.7] - 2025-03-04

### 技术改进
- 增强统计数据管理
  - 使用事件驱动的自动更新改进统计数据加载
  - 优化数据同步，在切换账本时
  - 增强统计数据加载性能和可靠性
  - 改进状态管理，减少冗余代码
  - 优化内存使用，防止内存泄漏

- 改进分类统计列表
  - 限制默认显示数量，加快页面加载速度
  - 添加"查看更多"功能
  - 支持可定制的默认显示数量
  - 添加国际化的"收起"和"查看更多"
  
- 增强统计页面布局
  - 添加账本统计卡片，显示总收入、支出和余额
  - 优化数据加载，提高页面响应速度
  - 改进状态管理，便于代码维护
  - 添加时间范围选择，包括"最近一天"、"本月"和"全部"
  - 优化统计卡片布局，调整支出和收入显示顺序

### 问题修复
- 修复统计数据在应用程序初始化时未加载
- 修复统计数据未在切换账本时立即更新

## [1.0.0-alpha.6] - 2025-03-03

### UI 改进
- 统计图表的综合优化
  - 用Syncfusion Flutter Charts替换FL Chart
  - 实现现代饼图设计
  - 添加酷色调的科技生态主题颜色方案
  - 增强图表动画和交互
  - 改进数据标签显示

### 技术改进
- 增强版本管理
  - 使用package_info_plus进行动态版本检索
  - 移除硬编码版本号
- 更新依赖版本
- 优化代码结构和性能

## [1.0.0-alpha.5] - 2025-03-03

### 新功能
- 在统计页面中添加分类饼图
- 增强数据可视化能力
- 添加收入和支出分类统计

### 改进
- 优化统计数据加载性能
- 增强空状态显示
- 改进UI响应速度

### 问题修复
- 修复统计计算错误
- 修复主题切换显示问题
- 修复缺少国际化文本

## [1.0.0-alpha.4] - 2025-03-02

### 更改
- 优化BookStatisticCard组件设计和功能
  - 添加默认显示模式参数
  - 更新日期格式
  - 移除切换按钮，简化设计
  - 转换为StatelessWidget
  - 增强视觉效果
  - 添加国际化的总标签支持

## [1.0.0-alpha.3] - 2024-03-01

### UI 改进
- 增强债务容器布局，突出应收/应付金额
- 将总金额显示作为次要信息
- 添加债务进度条，便于直观完成状态
- 改进债务类型标签和图标

### 功能改进
- 添加应用程序启动时的自动同步
- 增强千分位格式化
- 改进债务管理流程

### 问题修复
- 修复Android签名配置
- 修复债务金额计算
- 修复各种布局问题

## [1.0.0-alpha.2] - 2024-03-01

### 新功能
- 添加债务管理
- 添加多语言支持
- 添加数据备份和恢复

### 改进
- 增强用户界面
- 改进应用程序性能
- 增强数据同步

### 问题修复
- 修复账本切换问题
- 修复数据导入错误
- 修复UI显示异常

## [1.0.0-alpha.1] - 2024-03-01

### 初始发布
- 基本会计功能
- 多账本管理
- 数据统计和分析
- 基本设置功能